
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema de Registro de Ventas</title>
    <style>
        body {
            background-color: #333;
            color: #fff;
            font-family: Arial, sans-serif;
            padding: 20px;
        }
        h1 {
            text-align: center;
        }
        .table-section {
            margin: 20px 0;
        }
        .menu-item {
            margin: 5px 0;
        }
        .mesa {
            margin: 15px 0;
            padding: 10px;
            background-color: #444;
            border-radius: 5px;
        }
        .total {
            font-weight: bold;
        }
        button {
            margin-top: 10px;
            padding: 10px;
            cursor: pointer;
            border: none;
            border-radius: 5px;
            background-color: #555;
            color: white;
        }
        button:hover {
            background-color: #666;
        }
        .button-danger {
            background-color: red;
        }
        .button-danger:hover {
            background-color: darkred;
        }
        .clear-button {
            display: inline-block;
            margin-top: 10px;
            background-color: #f39c12;
        }
        .clear-button:hover {
            background-color: #e67e22;
        }
        .update-price-button {
            margin-top: 10px;
            background-color: #2980b9;
        }
        .update-price-button:hover {
            background-color: #3498db;
        }
        .price-input {
            margin-left: 10px;
            width: 60px;
        }
    </style>
</head>
<body>

<h1>Registro de Ventas</h1>

<label for="mesa-select">Selecciona una mesa:</label>
<select id="mesa-select">
    <option value="">--Seleccionar mesa--</option>
    <script>
        for (let i = 1; i <= 20; i++) {
            document.write(`<option value="${i}">Mesa ${i}</option>`);
        }
    </script>
</select>

<div class="menu">
    <h2>Menú Completo</h2>

    <div class="asados">
        <h3>Asados</h3>
        <div class="menu-item">Costilla de cerdo: C$<span class="price" id="price-costilla">300</span>
            <button onclick="addItem('Costilla de cerdo', 'price-costilla')">Agregar</button>
            <input type="number" class="price-input" placeholder="Nuevo precio" onchange="updatePrice('price-costilla', this.value)">
        </div>
        <div class="menu-item">Pollo asado: C$<span class="price" id="price-pollo-asado">220</span>
            <button onclick="addItem('Pollo asado', 'price-pollo-asado')">Agregar</button>
            <input type="number" class="price-input" placeholder="Nuevo precio" onchange="updatePrice('price-pollo-asado', this.value)">
        </div>
        <div class="menu-item">Cerdo asado: C$<span class="price" id="price-cerdo-asado">220</span>
            <button onclick="addItem('Cerdo asado', 'price-cerdo-asado')">Agregar</button>
            <input type="number" class="price-input" placeholder="Nuevo precio" onchange="updatePrice('price-cerdo-asado', this.value)">
        </div>
        <div class="menu-item">Corazón asado: C$<span class="price" id="price-corazon-asado">220</span>
            <button onclick="addItem('Corazón asado', 'price-corazon-asado')">Agregar</button>
            <input type="number" class="price-input" placeholder="Nuevo precio" onchange="updatePrice('price-corazon-asado', this.value)">
        </div>
        <div class="menu-item">Gonces asados: C$<span class="price" id="price-gonces-asados">450</span>
            <button onclick="addItem('Gonces asados', 'price-gonces-asados')">Agregar</button>
            <input type="number" class="price-input" placeholder="Nuevo precio" onchange="updatePrice('price-gonces-asados', this.value)">
        </div>
        <div class="menu-item">Lomo de costilla (asado): C$<span class="price" id="price-lomo-costilla">470</span>
            <button onclick="addItem('Lomo de costilla', 'price-lomo-costilla')">Agregar</button>
            <input type="number" class="price-input" placeholder="Nuevo precio" onchange="updatePrice('price-lomo-costilla', this.value)">
        </div>
    </div>
    
    <div class="mariscos">
        <h3>Mariscos</h3>
        <div class="menu-item">Camarones a la plancha: C$<span class="price" id="price-camarones-plancha">370</span>
            <button onclick="addItem('Camarones a la plancha', 'price-camarones-plancha')">Agregar</button>
            <input type="number" class="price-input" placeholder="Nuevo precio" onchange="updatePrice('price-camarones-plancha', this.value)">
        </div>
        <div class="menu-item">Camarones empanizados: C$<span class="price" id="price-camarones-empanizados">370</span>
            <button onclick="addItem('Camarones empanizados', 'price-camarones-empanizados')">Agregar</button>
            <input type="number" class="price-input" placeholder="Nuevo precio" onchange="updatePrice('price-camarones-empanizados', this.value)">
        </div>
        <div class="menu-item">Camarones al ajillo: C$<span class="price" id="price-camarones-ajillo">370</span>
            <button onclick="addItem('Camarones al ajillo', 'price-camarones-ajillo')">Agregar</button>
            <input type="number" class="price-input" placeholder="Nuevo precio" onchange="updatePrice('price-camarones-ajillo', this.value)">
        </div>
        <div class="menu-item">Corvina a la plancha: C$<span class="price" id="price-corvina">370</span>
            <button onclick="addItem('Corvina a la plancha', 'price-corvina')">Agregar</button>
            <input type="number" class="price-input" placeholder="Nuevo precio" onchange="updatePrice('price-corvina', this.value)">
        </div>
    </div>
    
    <div class="pollo">
        <h3>Pollo</h3>
        <div class="menu-item">Pollo a la plancha: C$<span class="price" id="price-pollo-plancha">350</span>
            <button onclick="addItem('Pollo a la plancha', 'price-pollo-plancha')">Agregar</button>
            <input type="number" class="price-input" placeholder="Nuevo precio" onchange="updatePrice('price-pollo-plancha', this.value)">
        </div>
        <div class="menu-item">Pollo al vino: C$<span class="price" id="price-pollo-vino">350</span>
            <button onclick="addItem('Pollo al vino', 'price-pollo-vino')">Agregar</button>
            <input type="number" class="price-input" placeholder="Nuevo precio" onchange="updatePrice('price-pollo-vino', this.value)">
        </div>
        <div class="menu-item">Pollo jalapeño: C$<span class="price" id="price-pollo-jalapeno">350</span>
            <button onclick="addItem('Pollo jalapeño', 'price-pollo-jalapeno')">Agregar</button>
            <input type="number" class="price-input" placeholder="Nuevo precio" onchange="updatePrice('price-pollo-jalapeno', this.value)">
        </div>
        <div class="menu-item">Pollo a la plancha (T/Boca): C$<span class="price" id="price-pollo-tboca">400</span>
            <button onclick="addItem('Pollo a la plancha (T/Boca)', 'price-pollo-tboca')">Agregar</button>
            <input type="number" class="price-input" placeholder="Nuevo precio" onchange="updatePrice('price-pollo-tboca', this.value)">
        </div>
    </div>
    
    <div class="extras">
        <h3>Extras</h3>
        <div class="menu-item">Arroz o gallo pinto: C$<span class="price" id="price-arroz">50</span>
            <button onclick="addItem('Arroz o gallo pinto', 'price-arroz')">Agregar</button>
            <input type="number" class="price-input" placeholder="Nuevo precio" onchange="updatePrice('price-arroz', this.value)">
        </div>
        <div class="menu-item">Papas: C$<span class="price" id="price-papas">200</span>
            <button onclick="addItem('Papas', 'price-papas')">Agregar</button>
            <input type="number" class="price-input" placeholder="Nuevo precio" onchange="updatePrice('price-papas', this.value)">
        </div>
        <div class="menu-item">Ensalada: C$<span class="price" id="price-ensalada">40</span>
            <button onclick="addItem('Ensalada', 'price-ensalada')">Agregar</button>
            <input type="number" class="price-input" placeholder="Nuevo precio" onchange="updatePrice('price-ensalada', this.value)">
        </div>
        <div class="menu-item">Tostones: C$<span class="price" id="price-tostones">50</span>
            <button onclick="addItem('Tostones', 'price-tostones')">Agregar</button>
            <input type="number" class="price-input" placeholder="Nuevo precio" onchange="updatePrice('price-tostones', this.value)">
        </div>
        <div class="menu-item">Jalapeño: C$<span class="price" id="price-jalapeno">40</span>
            <button onclick="addItem('Jalapeño', 'price-jalapeno')">Agregar</button>
            <input type="number" class="price-input" placeholder="Nuevo precio" onchange="updatePrice('price-jalapeno', this.value)">
        </div>
        <div class="menu-item">Queso: C$<span class="price" id="price-queso">50</span>
            <button onclick="addItem('Queso', 'price-queso')">Agregar</button>
            <input type="number" class="price-input" placeholder="Nuevo precio" onchange="updatePrice('price-queso', this.value)">
        </div>
    </div>
    
    <div class="cervezas">
        <h3>Cervezas y Licores</h3>
        <div class="menu-item">Toña <button onclick="addDrink('Toña')">Agregar</button></div>
        <div class="menu-item">Toña Light <button onclick="addDrink('Toña Light')">Agregar</button></div>
        <div class="menu-item">Victoria Clásica <button onclick="addDrink('Victoria Clásica')">Agregar</button></div>
        <div class="menu-item">Victoria Frost <button onclick="addDrink('Victoria Frost')">Agregar</button></div>
        <div class="menu-item">Sol <button onclick="addDrink('Sol')">Agregar</button></div>
        <div class="menu-item">Heineken <button onclick="addDrink('Heineken')">Agregar</button></div>
        <div class="menu-item">Bamboo <button onclick="addDrink('Bamboo')">Agregar</button></div>
        <div class="menu-item">Adán y Eva <button onclick="addDrink('Adán y Eva')">Agregar</button></div>
        <div class="menu-item">Bliss <button onclick="addDrink('Bliss')">Agregar</button></div>
        <div class="menu-item">Hard Seltzer Spark <button onclick="addDrink('Hard Seltzer Spark')">Agregar</button></div>
        <div class="menu-item">Smirnoff <button onclick="addDrink('Smirnoff')">Agregar</button></div>
        <div class="menu-item">1/2 botella de ron nacional Flor de Caña <button onclick="addDrink('Ron nacional Flor de Caña')">Agregar</button></div>
        <div class="menu-item">1/4 botella de ron nacional Flor de Caña <button onclick="addDrink('Ron nacional Flor de Caña')">Agregar</button></div>
        <div class="menu-item">Tequila José Cuervo Especial <button onclick="addDrink('Tequila José Cuervo Especial')">Agregar</button></div>
        <div class="menu-item">Whisky Johnnie Walker Red <button onclick="addDrink('Whisky Johnnie Walker Red')">Agregar</button></div>
        <div class="menu-item">Whisky Johnnie Walker Black <button onclick="addDrink('Whisky Johnnie Walker Black')">Agregar</button></div>
    </div>
    
    <div class="bebidas-sin-alcohol">
        <h3>Bebidas Sin Alcohol</h3>
        <div class="menu-item">Limonada: C$<span class="price" id="price-limonada">40</span>
            <button onclick="addItem('Limonada', 'price-limonada')">Agregar</button>
            <input type="number" class="price-input" placeholder="Nuevo precio" onchange="updatePrice('price-limonada', this.value)">
        </div>
        <div class="menu-item">Gaseosa: C$<span class="price" id="price-gaseosa">30</span>
            <button onclick="addItem('Gaseosa', 'price-gaseosa')">Agregar</button>
            <input type="number" class="price-input" placeholder="Nuevo precio" onchange="updatePrice('price-gaseosa', this.value)">
        </div>
        <div class="menu-item">Té de limón: C$<span class="price" id="price-te-limon">40</span>
            <button onclick="addItem('Té de limón', 'price-te-limon')">Agregar</button>
            <input type="number" class="price-input" placeholder="Nuevo precio" onchange="updatePrice('price-te-limon', this.value)">
        </div>
        <div class="menu-item">Jugo de naranja: C$<span class="price" id="price-jugo-naranja">40</span>
            <button onclick="addItem('Jugo de naranja', 'price-jugo-naranja')">Agregar</button>
            <input type="number" class="price-input" placeholder="Nuevo precio" onchange="updatePrice('price-jugo-naranja', this.value)">
        </div>
        <div class="menu-item">Agua embotellada: C$<span class="price" id="price-agua">40</span>
            <button onclick="addItem('Agua embotellada', 'price-agua')">Agregar</button>
            <input type="number" class="price-input" placeholder="Nuevo precio" onchange="updatePrice('price-agua', this.value)">
        </div>
    </div>
</div>

<div class="table-section">
    <h2>Consumo por Mesa</h2>
    <div id="mesas-container"></div>
</div>

<div>
    <button onclick="calculateTotal()">Calcular Total</button>
    <button class="button-danger" onclick="clearDay()">Limpiar el Día</button>
</div>

<script>
    const mesas = {};

    function addItem(producto, priceId) {
        const mesaSelect = document.getElementById("mesa-select");
        const mesa = mesaSelect.value;

        if (!mesa) {
            alert("Por favor, selecciona una mesa.");
            return;
        }

        if (!mesas[mesa]) {
            mesas[mesa] = [];
        }

        const precio = parseFloat(document.getElementById(priceId).textContent);
        mesas[mesa].push({ producto, precio });
        displayMesa();
        localStorage.setItem('mesas', JSON.stringify(mesas));
    }

    function addDrink(drink) {
        const mesaSelect = document.getElementById("mesa-select");
        const mesa = mesaSelect.value;

        if (!mesa) {
            alert("Por favor, selecciona una mesa.");
            return;
        }

        if (!mesas[mesa]) {
            mesas[mesa] = [];
        }

        const existingDrink = mesas[mesa].find(item => item.producto === drink);

        if (existingDrink) {
            existingDrink.cantidad += 1;
        } else {
            mesas[mesa].push({ producto: drink, cantidad: 1 });
        }

        displayMesa();
        localStorage.setItem('mesas', JSON.stringify(mesas));
    }

    function displayMesa() {
        const mesasContainer = document.getElementById("mesas-container");
        mesasContainer.innerHTML = '';

        for (const mesaKey in mesas) {
            const items = mesas[mesaKey];
            const mesaDiv = document.createElement("div");
            mesaDiv.classList.add("mesa");
            mesaDiv.innerHTML = `<h3>Mesa ${mesaKey}</h3>`;
            items.forEach((item, index) => {
                if (item.precio) {
                    mesaDiv.innerHTML += `<div>${item.producto}: C$${item.precio} <button onclick="removeItem('${mesaKey}', ${index})">Eliminar</button></div>`;
                } else {
                    mesaDiv.innerHTML += `<div>${item.producto}: ${item.cantidad} unidad(es) <button onclick="removeItem('${mesaKey}', ${index})">Eliminar</button></div>`;
                }
            });
            const total = items.reduce((sum, item) => sum + (item.precio ? item.precio : 0), 0);
            mesaDiv.innerHTML += `<div class="total">Total Mesa ${mesaKey}: C$${total}</div>`;
            mesaDiv.innerHTML += `<button class="clear-button" onclick="clearTable('${mesaKey}')">Limpiar Mesa ${mesaKey}</button>`;
            mesasContainer.appendChild(mesaDiv);
        }
    }

    function removeItem(mesa, index) {
        mesas[mesa].splice(index, 1);
        localStorage.setItem('mesas', JSON.stringify(mesas));
        displayMesa();
    }

    function updatePrice(priceId, newPrice) {
        const priceElement = document.getElementById(priceId);
        if (newPrice && !isNaN(newPrice) && newPrice > 0) {
            priceElement.textContent = newPrice;
        } else {
            alert("Por favor, introduce un precio válido.");
        }
    }

    function clearTable(mesa) {
        if (confirm(`¿Estás seguro de que quieres limpiar la Mesa ${mesa}?`)) {
            delete mesas[mesa];
            localStorage.setItem('mesas', JSON.stringify(mesas));
            displayMesa();
            alert(`La Mesa ${mesa} ha sido limpiada.`);
        }
    }

    function calculateTotal() {
        let grandTotal = 0;

        for (const mesaKey in mesas) {
            const items = mesas[mesaKey];
            const total = items.reduce((sum, item) => sum + (item.precio ? item.precio : 0), 0);
            grandTotal += total;
        }

        alert(`Total general para todas las mesas: C$${grandTotal}`);
    }

    function clearDay() {
        if (confirm("¿Estás seguro de que quieres limpiar el día?")) {
            localStorage.removeItem('mesas');
            for (const mesa in mesas) {
                mesas[mesa] = [];
            }
            document.getElementById("mesas-container").innerHTML = '';
            alert("El día ha sido limpiado.");
        }
    }

    window.onload = function() {
        const storedMesas = localStorage.getItem('mesas');
        if (storedMesas) {
            Object.assign(mesas, JSON.parse(storedMesas));
            displayMesa();
        }
    };
</script>

</body>
</html>