
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema de Registro de Ventas</title>
    <style>
        body {
            background-color: #333;
            color: #fff;
            font-family: Arial, sans-serif;
            padding: 20px;
            margin: 0;
        }
        h1 {
            text-align: center;
        }
        .table-section {
            margin: 20px 0;
        }
        .menu-category {
            margin-bottom: 20px;
        }
        .menu-item {
            margin: 5px 0;
        }
        .mesa {
            margin: 15px 0;
            padding: 10px;
            background-color: #444;
            border-radius: 5px;
        }
        .total {
            font-weight: bold;
        }
        button {
            margin-top: 10px;
            padding: 10px;
            cursor: pointer;
            border: none;
            border-radius: 5px;
            background-color: #555;
            color: white;
            width: 100%;
        }
        button:hover {
            background-color: #666;
        }
        .button-danger {
            background-color: red;
        }
        .button-danger:hover {
            background-color: darkred;
        }
        .clear-button {
            display: inline-block;
            margin-top: 10px;
            background-color: #f39c12;
        }
        .clear-button:hover {
            background-color: #e67e22;
        }
        .price-input {
            margin-left: 10px;
            width: 60px;
        }
        .whatsapp-button {
            display: block;
            background-color: #25D366;
            color: white;
            text-align: center;
            padding: 10px;
            border-radius: 5px;
            text-decoration: none;
        }
        .whatsapp-button:hover {
            background-color: #128C7E;
        }
        @media (max-width: 600px) {
            button {
                width: auto;
            }
        }
    </style>
</head>
<body>

<h1>Registro de Ventas</h1>

<label for="mesa-select">Selecciona una mesa:</label>
<select id="mesa-select">
    <option value="">--Seleccionar mesa--</option>
    <script>
        for (let i = 1; i <= 20; i++) {
            document.write(`<option value="${i}">Mesa ${i}</option>`);
        }
    </script>
</select>

<div class="menu">
    <h2>Menú Completo</h2>

    <div class="menu-category">
        <h3>Asados</h3>
        <select id="asado-select">
            <option value="Costilla de cerdo">Costilla de cerdo: C$300</option>
            <option value="Pollo asado">Pollo asado: C$220</option>
            <option value="Cerdo asado">Cerdo asado: C$220</option>
            <option value="Corazón asado">Corazón asado: C$220</option>
            <option value="Gonces asados">Gonces asados: C$450</option>
            <option value="Lomo de costilla">Lomo de costilla (asado): C$470</option>
        </select>
        <button onclick="addItem(document.getElementById('asado-select').value, 'asado')">Agregar Asado</button>
    </div>
    
    <div class="menu-category">
        <h3>Mariscos</h3>
        <select id="marisco-select">
            <option value="Camarones a la plancha">Camarones a la plancha: C$370</option>
            <option value="Camarones empanizados">Camarones empanizados: C$370</option>
            <option value="Camarones al ajillo">Camarones al ajillo: C$370</option>
            <option value="Corvina a la plancha">Corvina a la plancha: C$370</option>
        </select>
        <button onclick="addItem(document.getElementById('marisco-select').value, 'marisco')">Agregar Marisco</button>
    </div>
    
    <div class="menu-category">
        <h3>Pollo</h3>
        <select id="pollo-select">
            <option value="Pollo a la plancha">Pollo a la plancha: C$350</option>
            <option value="Pollo al vino">Pollo al vino: C$350</option>
            <option value="Pollo jalapeño">Pollo jalapeño: C$350</option>
            <option value="Pollo a la plancha (T/Boca)">Pollo a la plancha (T/Boca): C$400</option>
        </select>
        <button onclick="addItem(document.getElementById('pollo-select').value, 'pollo')">Agregar Pollo</button>
    </div>
    
    <div class="menu-category">
        <h3>Extras</h3>
        <select id="extras-select">
            <option value="Arroz o gallo pinto">Arroz o gallo pinto: C$50</option>
            <option value="Papas">Papas: C$200</option>
            <option value="Ensalada">Ensalada: C$40</option>
            <option value="Tostones">Tostones: C$50</option>
            <option value="Jalapeño">Jalapeño: C$40</option>
            <option value="Queso">Queso: C$50</option>
        </select>
        <button onclick="addItem(document.getElementById('extras-select').value, 'extras')">Agregar Extra</button>
    </div>
    
    <div class="menu-category">
        <h3>Cervezas y Licores</h3>
        <select id="cervezas-select">
            <option value="Toña">Toña</option>
            <option value="Toña Light">Toña Light</option>
            <option value="Victoria Clásica">Victoria Clásica</option>
            <option value="Victoria Frost">Victoria Frost</option>
            <option value="Sol">Sol</option>
            <option value="Heineken">Heineken</option>
            <option value="Bamboo">Bamboo</option>
            <option value="Adán y Eva">Adán y Eva</option>
            <option value="Bliss">Bliss</option>
            <option value="Hard Seltzer Spark">Hard Seltzer Spark</option>
            <option value="Smirnoff">Smirnoff</option>
            <option value="Ron nacional Flor de Caña (1/2 botella)">1/2 botella de ron nacional Flor de Caña</option>
            <option value="Ron nacional Flor de Caña (1/4 botella)">1/4 botella de ron nacional Flor de Caña</option>
            <option value="Tequila José Cuervo Especial">Tequila José Cuervo Especial</option>
            <option value="Whisky Johnnie Walker Red">Whisky Johnnie Walker Red</option>
            <option value="Whisky Johnnie Walker Black">Whisky Johnnie Walker Black</option>
        </select>
        <button onclick="addDrink(document.getElementById('cervezas-select').value)">Agregar Cerveza/Licores</button>
    </div>
    
    <div class="menu-category">
        <h3>Bebidas Sin Alcohol</h3>
        <select id="bebidas-select">
            <option value="Limonada">Limonada: C$40</option>
            <option value="Gaseosa">Gaseosa: C$30</option>
            <option value="Té de limón">Té de limón: C$40</option>
            <option value="Jugo de naranja">Jugo de naranja: C$40</option>
            <option value="Agua embotellada">Agua embotellada: C$40</option>
        </select>
        <button onclick="addItem(document.getElementById('bebidas-select').value, 'bebidas')">Agregar Bebida Sin Alcohol</button>
    </div>
</div>

<div class="table-section">
    <h2>Consumo por Mesa</h2>
    <div id="mesas-container"></div>
</div>

<div>
    <button onclick="calculateTotal()">Calcular Total</button>
    <button class="button-danger" onclick="clearDay()">Limpiar el Día</button>
</div>

<a href="https://api.whatsapp.com/send?phone=50584751878" class="whatsapp-button" target="_blank">Contactar por WhatsApp</a>

<script>
    const mesas = {};

    function addItem(producto, category) {
        const mesaSelect = document.getElementById("mesa-select");
        const mesa = mesaSelect.value;

        let precio;
        switch (category) {
            case 'asado':
                precio = (producto === 'Costilla de cerdo') ? 300 : (producto === 'Pollo asado') ? 220 : (producto === 'Cerdo asado') ? 220 : (producto === 'Corazón asado') ? 220 : (producto === 'Gonces asados') ? 450 : 470;
                break;
            case 'marisco':
                precio = (producto === 'Camarones a la plancha') ? 370 : (producto === 'Camarones empanizados') ? 370 : (producto === 'Camarones al ajillo') ? 370 : 370;
                break;
            case 'pollo':
                precio = (producto === 'Pollo a la plancha') ? 350 : (producto === 'Pollo al vino') ? 350 : (producto === 'Pollo jalapeño') ? 350 : 400;
                break;
            case 'extras':
                precio = (producto === 'Arroz o gallo pinto') ? 50 : (producto === 'Papas') ? 200 : (producto === 'Ensalada') ? 40 : (producto === 'Tostones') ? 50 : (producto === 'Jalapeño') ? 40 : 50;
                break;
            case 'bebidas':
                precio = (producto === 'Limonada') ? 40 : (producto === 'Gaseosa') ? 30 : (producto === 'Té de limón') ? 40 : (producto === 'Jugo de naranja') ? 40 : 40;
                break;
            default:
                precio = 0; // Para cervezas y licores, no se define precio por ahora
                break;
        }

        if (!mesa) {
            alert("Por favor, selecciona una mesa.");
            return;
        }

        if (!mesas[mesa]) {
            mesas[mesa] = [];
        }

        mesas[mesa].push({ producto, precio });
        displayMesa();
        localStorage.setItem('mesas', JSON.stringify(mesas));
    }

    function addDrink(drink) {
        const mesaSelect = document.getElementById("mesa-select");
        const mesa = mesaSelect.value;

        if (!mesa) {
            alert("Por favor, selecciona una mesa.");
            return;
        }

        if (!mesas[mesa]) {
            mesas[mesa] = [];
        }

        const existingDrink = mesas[mesa].find(item => item.producto === drink);

        if (existingDrink) {
            existingDrink.cantidad += 1;
        } else {
            mesas[mesa].push({ producto: drink, cantidad: 1 });
        }

        displayMesa();
        localStorage.setItem('mesas', JSON.stringify(mesas));
    }

    function displayMesa() {
        const mesasContainer = document.getElementById("mesas-container");
        mesasContainer.innerHTML = '';

        for (const mesaKey in mesas) {
            const items = mesas[mesaKey];
            const mesaDiv = document.createElement("div");
            mesaDiv.classList.add("mesa");
            mesaDiv.innerHTML = `<h3>Mesa ${mesaKey}</h3>`;
            items.forEach((item, index) => {
                if (item.precio) {
                    mesaDiv.innerHTML += `<div>${item.producto}: C$${item.precio} <button onclick="removeItem('${mesaKey}', ${index})">Eliminar</button></div>`;
                } else {
                    mesaDiv.innerHTML += `<div>${item.producto}: ${item.cantidad} unidad(es) <button onclick="removeItem('${mesaKey}', ${index})">Eliminar</button></div>`;
                }
            });
            const total = items.reduce((sum, item) => sum + (item.precio ? item.precio : 0), 0);
            mesaDiv.innerHTML += `<div class="total">Total Mesa ${mesaKey}: C$${total}</div>`;
            mesaDiv.innerHTML += `<button class="clear-button" onclick="clearTable('${mesaKey}')">Limpiar Mesa ${mesaKey}</button>`;
            mesasContainer.appendChild(mesaDiv);
        }
    }

    function removeItem(mesa, index) {
        mesas[mesa].splice(index, 1);
        localStorage.setItem('mesas', JSON.stringify(mesas));
        displayMesa();
    }

    function updatePrice(priceId, newPrice) {
        const priceElement = document.getElementById(priceId);
        if (newPrice && !isNaN(newPrice) && newPrice > 0) {
            priceElement.textContent = newPrice;
        } else {
            alert("Por favor, introduce un precio válido.");
        }
    }

    function clearTable(mesa) {
        if (confirm(`¿Estás seguro de que quieres limpiar la Mesa ${mesa}?`)) {
            delete mesas[mesa];
            localStorage.setItem('mesas', JSON.stringify(mesas));
            displayMesa();
            alert(`La Mesa ${mesa} ha sido limpiada.`);
        }
    }

    function calculateTotal() {
        let grandTotal = 0;

        for (const mesaKey in mesas) {
            const items = mesas[mesaKey];
            const total = items.reduce((sum, item) => sum + (item.precio ? item.precio : 0), 0);
            grandTotal += total;
        }

        alert(`Total general para todas las mesas: C$${grandTotal}`);
    }

    function clearDay() {
        if (confirm("¿Estás seguro de que quieres limpiar el día?")) {
            localStorage.removeItem('mesas');
            for (const mesa in mesas) {
                mesas[mesa] = [];
            }
            document.getElementById("mesas-container").innerHTML = '';
            alert("El día ha sido limpiado.");
        }
    }

    window.onload = function() {
        const storedMesas = localStorage.getItem('mesas');
        if (storedMesas) {
            Object.assign(mesas, JSON.parse(storedMesas));
            displayMesa();
        }
    };
</script>

</body>
</html>